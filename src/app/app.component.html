<header class="flex px-2 align-items-center border-bottom-1 surface-border">
    <div class="flex-1">
        <img ngSrc="assets/images/logo-small.webp" alt="Satisfactory Logo" height="35" width="182" priority
             class="lg:inline-block hidden">
        <img ngSrc="assets/images/logo-small.webp" alt="Satisfactory Logo" height="28" width="144" priority
             class="lg:hidden inline-block">
        <span class="text-primary">Sheet</span>
    </div>
    <div class="lg:pr-8 pr-4">
        <p-button [link]="true" label="How it works" (click)="showHowItWorks()" class="hidden lg:block"></p-button>
        <p-button icon="pi pi-question-circle" class="block lg:hidden" (click)="showHowItWorks()" [text]="true"
                  [rounded]="true"></p-button>
    </div>
    @if (user$ | async; as user) {
        <div class="flex align-items-center">
            @if (user.photoURL) {
                <img [ngSrc]="user.photoURL" [alt]="user?.displayName" class="mr-2 border-circle" width="32" height="32"
                     priority (click)="menu.toggle($event)">
            }
        </div>
    } @else {
        <div>
            <p-button (click)="signIn()" class="lg:block hidden">
                <img ngSrc="assets/images/google-logo.png" alt="Google Logo" width="24" height="24">
                <span class="pl-1">Sign In</span>
            </p-button>

            <p-button (click)="signIn()" class="lg:hidden block" size="small">
                <img ngSrc="assets/images/google-logo.png" alt="Google Logo" width="16" height="16">
                <span class="pl-1">Sign In</span>
            </p-button>
        </div>
    }
</header>
<router-outlet></router-outlet>
<p-dialog header="How it works" [(visible)]="howItWorksIsVisible" [style]="{'min-width': '50vw'}">
    <p class="pb-2">Initially, you won't have any recipes being tracked. You will need to select them from the right
        sidebar by clicking on their name. They will then show up in the main section of the page.</p>
    <div class="text-center pb-2">
        <img ngSrc="assets/images/how_it_works/sidebar.png" alt="Sidebar of items" width="200" height="516"
             class="shadow-7">
    </div>
    <div class="text-center pb-2">
        <img ngSrc="assets/images/how_it_works/main-collapsed.png" alt="Main content of collapsed page" width="1000"
             height="134" class="shadow-7">
    </div>
    <p class="pb-2">Clicking on the arrow to the left will reveal the recipes for that item. <b class="text-primary">Note:</b>
        The default, non-alternate recipe has the same name as the item itself.</p>
    <div class="text-center pb-2">
        <img ngSrc="assets/images/how_it_works/main-uncollapsed.png" alt="Main content of uncollapsed page" width="1000"
             height="241" class="shadow-7">
    </div>
    <p class="pb-2">Clicking on the number for the recipe will switch to edit mode where you can enter the total
        production rate for that recipe. Hitting ENTER or clicking out of the input will leave edit mode and save your
        data.</p>
    <div class="text-center pb-2">
        <img ngSrc="assets/images/how_it_works/main-uncollapsed-editing.png"
             alt="Main content of uncollapsed page in edit mode" width="1000" height="241" class="shadow-7">
    </div>
    <p class="pb-2">Once done editing, the total and remaining values will update to reflect the changes. It's worth
        noting that the inputs for the recipe you edited will also adjust to account for the new rate if they're also in
        the list of items to track.</p>
    <div class="text-center pb-2">
        <img ngSrc="assets/images/how_it_works/main-uncollapsed-saved.png"
             alt="Main content of uncollapsed page in edit mode" width="1000" height="325" class="shadow-7">
    </div>
    <p class="pb-2">The <b class="text-primary">Total</b> column tells you how much you're making of that item across
        all recipes. The <b class="text-primary">Remaining</b> column tells you how much you have left after that item
        is accounted for in all recipes. <i class="text-primary">total - (sum from all recipes)</i>.</p>
    <p class="pb-2">If you are using this tool and you <span class="text-primary">are NOT</span> logged in, your data is
        saved locally in your browser. If you decide to log in, your data will be saved in the cloud in Google Firebase.
    </p>
    <p class="text-green-500">I do NOT store anything about you except your production rates and will gladly prove it to
        whomever is concerned.</p>
</p-dialog>
<p-menu #menu [model]="loggedInMenuItems" [popup]="true"></p-menu>
