<header>

</header>
<main class="h-screen">
    <div>
<!--        <p-autoComplete [(ngModel)]="selectedFilteredRecipe"-->
<!--                        [suggestions]="filteredRecipes"-->
<!--                        (completeMethod)="filterRecipes($event)"-->
<!--                        (onSelect)="selectRecipe($event)"-->
<!--                        optionLabel="name"-->
<!--                        [dropdown]="true"-->
<!--                        placeholder="Add an item">-->
<!--            <ng-template let-recipe pTemplate="item">-->
<!--                <div class="flex align-items-center">-->
<!--                    <img [ngSrc]="recipe.image" [alt]="recipe.name" class="mr-2" width="32" height="32" priority>-->
<!--                    <span>{{recipe.name}}</span>-->
<!--                </div>-->
<!--            </ng-template>-->
<!--        </p-autoComplete>-->

        <p-treeTable [value]="selectedItems">
            <ng-template pTemplate="header">
                <tr>
                    <th>Name</th>
                    <th>Total</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowNode let-rowData="rowData">
                <tr [ttRow]="rowNode">
                    <td>
                        <p-treeTableToggler [rowNode]="rowNode"></p-treeTableToggler>
                        @if (rowData.image) {
                            <span>
                                    <img [ngSrc]="rowData.image" [alt]="rowData.name" class="mr-2" width="32" height="32" priority>
                                </span>
                        }
                        {{rowData.name}}
                    </td>
                    <td>
                        <div>
                            <span>{{rowData.amount}}</span>
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-treeTable>
    </div>
    <div class="border-left-1 surface-border overflow-y-auto p-2">
        <h3>Add an item</h3>
        <span class="p-input-icon-left mb-4">
            <i class="pi pi-search"></i>
            <input pInputText type="text" class="w-full" placeholder="Search" [formControl]="searchText">
        </span>


        @for (item of itemsToSearch$ | async; track item.key) {
            <div class="flex align-items-center cursor-pointer hover:bg-primary py-1" (click)="selectItem(item)">
                <span>
                    <img [ngSrc]="item.image" [alt]="item.name" class="mr-2" width="32" height="32" priority>
                </span>
                <span>{{item.name}}</span>
            </div>
        }
    </div>
</main>

